# ุฑุงูููุง ุชุณุช ุณุณุชู QR Code ู ูพุฑุฏุงุฎุช ูุงฺฉุชูุฑ

## ูพุดโูุงุฒูุง

1. **Backend ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดุฏ:**
```bash
cd backend
../venv/bin/python manage.py runserver
```

2. **Frontend ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดุฏ:**
```bash
cd frontend
npm run dev
```

3. **ุฏุชุงุจุณ migrate ุดุฏู ุจุงุดุฏ:**
```bash
cd backend
../venv/bin/python manage.py migrate
```

## ูุฑุงุญู ุชุณุช

### ูุฑุญูู 1: ุงุฌุงุฏ ุฏุงุฏูโูุง ุชุณุช

#### 1.1 ุงุฌุงุฏ ฺฉุณุจโูฺฉุงุฑ ุจุง ูพฺฉุฌ ูุนุงู

ุงุฒ Django Admin:
1. ุจู `/admin` ุจุฑูุฏ
2. ฺฉ Business User ุงุฌุงุฏ ฺฉูุฏ
3. BusinessProfile ุขู ุฑุง ฺฉุงูู ฺฉูุฏ (ุญุชูุงู unique_code ุฎูุฏฺฉุงุฑ ุชููุฏ ูโุดูุฏ)
4. ฺฉ Package ุงุฌุงุฏ ฺฉูุฏ ุจุง:
   - DiscountAll: ูุซูุงู 10%
   - SpecificDiscount: ูุซูุงู 20% ุจุง ุนููุงู "ฺฉฺฉ ุชููุฏ"
   - EliteGift: ูุฏู ูฺู
   - VipExperience: ุญุฏุงูู ฺฉ
   - start_date ู end_date ุฑุง ูพุฑ ฺฉูุฏ
5. status ุฑุง ุจู 'approved' ู is_active ุฑุง True ฺฉูุฏ

#### 1.2 ุงุฌุงุฏ ูุดุชุฑ

1. ฺฉ Customer User ุงุฌุงุฏ ฺฉูุฏ
2. CustomerProfile ุฑุง ฺฉุงูู ฺฉูุฏ

### ูุฑุญูู 2: ุชุณุช Flow ุงุณฺฉู QR

#### 2.1 ูุงฺฏู ุจู ุนููุงู ูุดุชุฑ

```
URL: http://localhost:5173/
Username: customer_username
Password: customer_password
```

#### 2.2 ุจุงุฒ ฺฉุฑุฏู QR Scanner

1. ุงุฒ ููู ุฏุงุดุจูุฑุฏุ ุฏฺฉูู QR Scanner ุฑุง ฺฉูฺฉ ฺฉูุฏ
2. ุฏู ฺฏุฒูู ุฏุงุฑุฏ:
   - **ุงุณฺฉู QR Code**: ูุงุฒ ุจู QR Code ุฏุงุฑุฏ
   - **ูุฑูุฏ ุฏุณุช ฺฉุฏ**: ฺฉุฏ ฺฉุชุง ฺฉุณุจโูฺฉุงุฑ (ูุซูุงู 111111)

#### 2.3 ูุฑูุฏ ฺฉุฏ ฺฉุชุง

1. ุฑู "ูุงุฑุฏ ฺฉุฑุฏู ฺฉุฏ ฺฉุชุง ุจู ุตูุฑุช ุฏุณุช" ฺฉูฺฉ ฺฉูุฏ
2. ฺฉุฏ ฺฉุชุง ฺฉุณุจโูฺฉุงุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ (ูุซูุงู 111111)
3. ุฏฺฉูู "ุชุงุฏ" ุฑุง ุจุฒูุฏ

**ุงูุชุธุงุฑ:**
- Popup BusinessOptions ุจุงุฒ ุดูุฏ
- ุงูุชุงุฒ ูุดุชุฑ ููุงุด ุฏุงุฏู ุดูุฏ (0)
- ูุถุนุช VIP: ุจุฏูู ูุถุนุช
- 3 ฺฏุฒูู ููุงุด ุฏุงุฏู ุดูุฏ

### ูุฑุญูู 3: ุชุณุช ูพุฑุฏุงุฎุช ูุงฺฉุชูุฑ

#### 3.1 ุงูุชุฎุงุจ ูพุฑุฏุงุฎุช ูุงฺฉุชูุฑ

1. ุฑู ฺฏุฒูู "ูพุฑุฏุงุฎุช ูุงฺฉุชูุฑ" ฺฉูฺฉ ฺฉูุฏ

**ุงูุชุธุงุฑ:**
- Popup InvoicePayment ุจุงุฒ ุดูุฏ
- ุชุฎูู ุงุตู ููุงุด ุฏุงุฏู ุดูุฏ (10%)

#### 3.2 ูุฑูุฏ ูุจูุบ ูุงฺฉุชูุฑ

1. ุฏุฑ ููุฏ "ูุจูุบ ูุงฺฉุชูุฑ" ุนุฏุฏ ูุงุฑุฏ ฺฉูุฏ: `100000`
2. ูุดุงูุฏู ฺฉูุฏ ฺฉู:
   - ุนุฏุฏ ุจู ูุฑูุช ููุฒ ุชุจุฏู ูโุดูุฏ: `100,000`
   - ูุจูุบ ูพุณ ุงุฒ ุชุฎูู ููุงุด ุฏุงุฏู ูโุดูุฏ: `90,000 ุชููุงู`

#### 3.3 ูุนุงู ฺฉุฑุฏู ุชุฎูู ุฎุงุต

1. ุฑู ุฏฺฉูู "ุบุฑูุนุงู" ฺฉูุงุฑ "ุชุฎูู ุฎุงุต" ฺฉูฺฉ ฺฉูุฏ
2. ุฏุฑุตุฏ ุชุฎูู ุฎุงุต ููุงุด ุฏุงุฏู ูโุดูุฏ (20%)
3. ูุจูุบ ูุญุตูู ุจุง ุชุฎูู ุฎุงุต ุฑุง ูุงุฑุฏ ฺฉูุฏ: `50000`
4. ูุดุงูุฏู ฺฉูุฏ:
   - ูุฑูุช ุดุฏู: `50,000`
   - ูุจูุบ ูพุณ ุงุฒ ุชุฎูู: `40,000 ุชููุงู`

#### 3.4 ูุดุงูุฏู ุฌูุน ฺฉู

**ุงูุชุธุงุฑ:**
- ุฌูุน ุจุฏูู ุชุฎูู: `150,000 ุชููุงู`
- ุฌูุน ุจุง ุชุฎูู: `130,000 ุชููุงู`
- ููุฏุงุฑ ุชุฎูู: `20,000 ุชููุงู`

#### 3.5 ุงุฑุณุงู ูุงฺฉุชูุฑ

1. ุฏฺฉูู "ุงุฑุณุงู ุจุฑุง ุชุงุฏ" ุฑุง ุจุฒูุฏ

**ุงูุชุธุงุฑ:**
- Popup ุชุบุฑ ฺฉูุฏ ุจู ุญุงูุช "ุฏุฑ ุงูุชุธุงุฑ ุชุงุฏ"
- ูุจูุบ ููุง ููุงุด ุฏุงุฏู ุดูุฏ
- ูพุงู: "ุชุฑุงฺฉูุด ุดูุง ุจุง ููููุช ุซุจุช ุดุฏ ู ุฏุฑ ุงูุชุธุงุฑ ุชุงุฏ ฺฉุณุจโูฺฉุงุฑ ูโุจุงุดุฏ"

### ูุฑุญูู 4: ุชุณุช ุชุงุฏ ุชุฑุงฺฉูุด (ฺฉุณุจโูฺฉุงุฑ)

#### 4.1 ูุงฺฏ ุงูุช ู ูุงฺฏู ุจู ุนููุงู ฺฉุณุจโูฺฉุงุฑ

```
URL: http://localhost:5173/
Username: business_username
Password: business_password
```

#### 4.2 ูุดุงูุฏู ุชุฑุงฺฉูุดโูุง

**ุงุฒ Django Admin:**
1. ุจู `/admin/loyalty/transaction/` ุจุฑูุฏ
2. ุชุฑุงฺฉูุด ุฌุฏุฏ ุฑุง ูุดุงูุฏู ฺฉูุฏ
3. status ุขู 'pending' ุงุณุช

#### 4.3 ุชุงุฏ ุชุฑุงฺฉูุด

**ุงุฒ API:**
```bash
# ุฏุฑุงูุช ูุณุช ุชุฑุงฺฉูุดโูุง
curl -H "Authorization: Bearer <business_token>" \
  http://localhost:8000/api/loyalty/transactions/

# ุชุงุฏ ุชุฑุงฺฉูุด
curl -X POST \
  -H "Authorization: Bearer <business_token>" \
  http://localhost:8000/api/loyalty/transactions/1/approve/
```

**ุง ุงุฒ Django Admin:**
1. ุชุฑุงฺฉูุด ุฑุง ุจุงุฒ ฺฉูุฏ
2. Actions โ "Approve selected transactions"

### ูุฑุญูู 5: ุจุฑุฑุณ ุงูุชุงุฒุงุช

#### 5.1 ุจุฑุฑุณ CustomerLoyalty

ุงุฒ Django Admin:
1. ุจู `/admin/loyalty/customerloyalty/` ุจุฑูุฏ
2. loyalty ูุดุชุฑ ุจุฑุง ุขู ฺฉุณุจโูฺฉุงุฑ ุฑุง ูุดุงูุฏู ฺฉูุฏ
3. **ุงูุชุงุฒ:** ุจุงุฏ 13 ุจุงุดุฏ (130,000 / 10,000 = 13)
4. **VIP Status:** none (ูุงุฒ ุจู 3000 ุงูุชุงุฒ)

#### 5.2 ุชุณุช VIP Status

**ุจุฑุง ุชุณุช VIP:**
1. ุงุฒ Adminุ points ุฑุง ุจู 3500 ุชุบุฑ ุฏูุฏ
2. ฺฉ ุชุฑุงฺฉูุด ุฌุฏุฏ ุงุฌุงุฏ ู ุชุงุฏ ฺฉูุฏ
3. vip_status ุจุงุฏ ุจู 'vip' ุชุบุฑ ฺฉูุฏ

**ุจุฑุง ุชุณุช VIP+:**
1. points ุฑุง ุจู 7500 ุชุบุฑ ุฏูุฏ
2. vip_status ุจุงุฏ ุจู 'vip_plus' ุชุบุฑ ฺฉูุฏ

### ูุฑุญูู 6: ุชุณุช ููุชุฑูุง ุฏุณุชุฑุณ

#### 6.1 ุชุณุช ุฏุณุชุฑุณ ุจู VIP Services

1. ุจุง ูุดุชุฑ ูุงฺฏู ฺฉูุฏ ฺฉู 3000+ ุงูุชุงุฒ ุฏุงุฑุฏ
2. QR Scanner ุฑุง ุจุงุฒ ฺฉูุฏ
3. ฺฉุฏ ฺฉุชุง ุฑุง ูุงุฑุฏ ฺฉูุฏ
4. ุฏุฑ BusinessOptions:
   - **ฺฏุฒูู VIP Services ูุนุงู ุจุงุดุฏ**
   - Badge VIP ููุงุด ุฏุงุฏู ุดูุฏ

#### 6.2 ุชุณุช ูุฏู ุงูุช

1. ุงุฒ Adminุ `elite_gift_target_reached` ุฑุง True ฺฉูุฏ
2. QR Scanner ุฑุง ุจุงุฒ ฺฉูุฏ
3. ุฏุฑ BusinessOptions:
   - **ฺฏุฒูู "ุงุณุชูุงุฏู ุงุฒ ูุฏู ุงูุช" ูุนุงู ุจุงุดุฏ**

## ุชุณุชโูุง ุฎุทุง

### 1. ฺฉุฏ ฺฉุชุง ูุงูุนุชุจุฑ
```
Input: 999999
Expected: "ฺฉุณุจโูฺฉุงุฑ ุจุง ุงู ฺฉุฏ ุงูุช ูุดุฏ"
```

### 2. ฺฉุณุจโูฺฉุงุฑ ุจุฏูู ูพฺฉุฌ
```
Scenario: ฺฉุณุจโูฺฉุงุฑ ฺฉู ูพฺฉุฌ ูุนุงู ูุฏุงุฑุฏ
Expected: "ฺฉุณุจโูฺฉุงุฑ ูพฺฉุฌ ูุนุงู ูุฏุงุฑุฏ"
```

### 3. ูุจูุบ ุตูุฑ
```
Input: ููุฏ ูุจูุบ ุฎุงู
Expected: ุฏฺฉูู "ุงุฑุณุงู" ุบุฑูุนุงู ุจุงุดุฏ
```

### 4. ุชุฎูู ุฎุงุต ุจุฏูู ูุจูุบ
```
Scenario: ุชุฎูู ุฎุงุต ูุนุงู ุงูุง ูุจูุบ ูุงุฑุฏ ูุดุฏู
Expected: "ูุทูุงู ูุจูุบ ุชุฎูู ุฎุงุต ุฑุง ูุงุฑุฏ ฺฉูุฏ"
```

## ฺฺฉโูุณุช ููุง

- [ ] Backend ุงุฌุฑุง ูโุดูุฏ
- [ ] Frontend ุงุฌุฑุง ูโุดูุฏ
- [ ] Migrations ุงุฌุฑุง ุดุฏู
- [ ] ฺฉุณุจโูฺฉุงุฑ ุจุง ูพฺฉุฌ ูุนุงู ุงุฌุงุฏ ุดุฏู
- [ ] ูุดุชุฑ ุงุฌุงุฏ ุดุฏู
- [ ] ุงุณฺฉู/ูุฑูุฏ ฺฉุฏ ฺฉุงุฑ ูโฺฉูุฏ
- [ ] Business Options ููุงุด ุฏุงุฏู ูโุดูุฏ
- [ ] ูพุฑุฏุงุฎุช ูุงฺฉุชูุฑ ฺฉุงุฑ ูโฺฉูุฏ
- [ ] ูุฑูุช ุงุนุฏุงุฏ ุตุญุญ ุงุณุช (ููุฒ)
- [ ] ุชุฎููโูุง ูุญุงุณุจู ูโุดููุฏ
- [ ] ุชุฎูู ุฎุงุต ฺฉุงุฑ ูโฺฉูุฏ
- [ ] ุงุฑุณุงู ุชุฑุงฺฉูุด ูููู ุงุณุช
- [ ] ุญุงูุช "ุฏุฑ ุงูุชุธุงุฑ ุชุงุฏ" ููุงุด ุฏุงุฏู ูโุดูุฏ
- [ ] ุชุงุฏ ุชุฑุงฺฉูุด ุงูุชุงุฒ ุงุถุงูู ูโฺฉูุฏ
- [ ] VIP Status ุจุฑูุฒ ูโุดูุฏ

## ูุดฺฉูุงุช ุฑุงุฌ ู ุฑุงูโุญู

### 1. CORS Error
```
Solution: ูุทูุฆู ุดูุฏ CORS_ALLOW_ALL_ORIGINS = True ุฏุฑ settings.py
```

### 2. 401 Unauthorized
```
Solution: 
- Token ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุทูุฆู ุดูุฏ ูุงฺฏู ฺฉุฑุฏูโุงุฏ
- Token ุฏุฑ localStorage ุฐุฎุฑู ุดุฏู ุงุณุช
```

### 3. Calculation Error
```
Solution:
- Package ุจุงุฏ DiscountAll ุฏุงุดุชู ุจุงุดุฏ
- Package ุจุงุฏ is_active=True ุจุงุดุฏ
- Package status ุจุงุฏ 'approved' ุจุงุดุฏ
```

### 4. VIP Status Update ููโุดูุฏ
```
Solution:
- ูุชุฏ update_vip_status() ุฑุง ฺฺฉ ฺฉูุฏ
- ูุทูุฆู ุดูุฏ approve() ูุฑุงุฎูุงู ุดุฏู
```

## ูุงฺฏโูุง ููุฏ

### Backend
```bash
# ุชุฑุงฺฉูุดโูุง
python manage.py shell
>>> from loyalty.models import Transaction
>>> Transaction.objects.all()

# CustomerLoyalty
>>> from loyalty.models import CustomerLoyalty
>>> CustomerLoyalty.objects.all()
```

### Frontend Console
```javascript
// API Calls
console.log('Business Info:', businessInfo)
console.log('Transaction:', transaction)
```

## ูุชุฌูโฺฏุฑ

ุงฺฏุฑ ุชูุงู ูุฑุงุญู ุจุงูุง ุจุง ููููุช ุงูุฌุงู ุดุฏุ ุณุณุชู ุจู ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏ! ๐

ุจุฑุง ูุฑฺฏููู ูุดฺฉูุ ูุงฺฏโูุง backend ู frontend console ุฑุง ุจุฑุฑุณ ฺฉูุฏ.
